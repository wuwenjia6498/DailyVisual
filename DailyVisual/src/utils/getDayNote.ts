/**
 * 根据星期几和节气获取对应的备注
 */

/**
 * 24节气数据 (按年份存储)
 * 格式: { 年份: { "月-日": "节气名" } }
 */
const solarTermsData: Record<number, Record<string, string>> = {
  2025: {
    '1-5': '小寒', '1-20': '大寒',
    '2-3': '立春', '2-18': '雨水',
    '3-5': '惊蛰', '3-20': '春分',
    '4-4': '清明', '4-20': '谷雨',
    '5-5': '立夏', '5-21': '小满',
    '6-5': '芒种', '6-21': '夏至',
    '7-7': '小暑', '7-22': '大暑',
    '8-7': '立秋', '8-23': '处暑',
    '9-7': '白露', '9-23': '秋分',
    '10-8': '寒露', '10-23': '霜降',
    '11-7': '立冬', '11-22': '小雪',
    '12-7': '大雪', '12-21': '冬至',
  },
  2026: {
    '1-5': '小寒', '1-20': '大寒',
    '2-4': '立春', '2-18': '雨水',
    '3-5': '惊蛰', '3-20': '春分',
    '4-4': '清明', '4-20': '谷雨',
    '5-5': '立夏', '5-21': '小满',
    '6-5': '芒种', '6-21': '夏至',
    '7-7': '小暑', '7-22': '大暑',
    '8-7': '立秋', '8-23': '处暑',
    '9-7': '白露', '9-23': '秋分',
    '10-8': '寒露', '10-23': '霜降',
    '11-7': '立冬', '11-22': '小雪',
    '12-7': '大雪', '12-22': '冬至',
  },
  2027: {
    '1-5': '小寒', '1-20': '大寒',
    '2-4': '立春', '2-19': '雨水',
    '3-6': '惊蛰', '3-21': '春分',
    '4-5': '清明', '4-20': '谷雨',
    '5-6': '立夏', '5-21': '小满',
    '6-6': '芒种', '6-21': '夏至',
    '7-7': '小暑', '7-23': '大暑',
    '8-7': '立秋', '8-23': '处暑',
    '9-8': '白露', '9-23': '秋分',
    '10-8': '寒露', '10-24': '霜降',
    '11-7': '立冬', '11-22': '小雪',
    '12-7': '大雪', '12-22': '冬至',
  },
}

/**
 * 获取指定日期的节气名称
 * @param date 日期对象
 * @returns 节气名称，如果不是节气则返回 null
 */
function getSolarTerm(date: Date): string | null {
  const year = date.getFullYear()
  const month = date.getMonth() + 1
  const day = date.getDate()
  const key = `${month}-${day}`

  const yearData = solarTermsData[year]
  if (yearData && yearData[key]) {
    return yearData[key]
  }
  return null
}

/**
 * 获取指定日期对应的备注
 * @param date 日期对象
 * @returns 备注文字
 */
export function getDayNote(date: Date): string {
  const dayOfWeek = date.getDay() // 0=周日, 1=周一, ..., 6=周六
  const solarTerm = getSolarTerm(date)

  // 基础备注
  let baseNote: string
  switch (dayOfWeek) {
    case 0: // 周日
      baseNote = '最美绘本语言'
      break
    case 6: // 周六
      baseNote = '最美绘本语言&周末放映室'
      break
    default: // 周一至周五
      baseNote = '早晚安'
  }

  // 如果有节气，追加节气信息
  if (solarTerm) {
    return `${baseNote} & ${solarTerm}节气`
  }

  return baseNote
}

